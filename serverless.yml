service: Qubit-Backend
description: Qubit Backend Service

provider:
  name: aws
  runtime: nodejs18.x
  region: us-east-1
  
functions:
  app:
    handler: src/app.handler
    timeout: 60
    events:
      - httpApi: '*'   # âœ… Replaces ANY / and ANY /{proxy+}

package:
  individually: true
  excludeDevDependencies: true

plugins:
  - serverless-esbuild
  - serverless-dotenv-plugin
  - serverless-offline

custom:
  esbuild:
    bundle: true
    minify: false
    sourcemap: true
    target: node18
    platform: node
    tsconfig: tsconfig.json
    external:
      - pg


# custom:
#   esbuild:
#     bundle: true
#     minify: true
#     sourcemap: true
#     target: node20
#     platform: node
#     keepOutputDirectory: true
#     concurrency: 10
#     external:
#       - pg 

# layers:
#   pg-layer:
#     path: layers/pg-layer
#     name: pg-lambda-layer
#     compatibleRuntimes:
#       - nodejs20.x
#     description: PostgreSQL driver layer
   
